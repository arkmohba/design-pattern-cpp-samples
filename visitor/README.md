# 概要

visitorパターンを実装してみたもの。

* 普通だったらクラス固有の処理はクラスに実装する
* その場合、処理のバリエーションを増やそうとするとクラスを増やす必要がある
* データの構造と処理を分離して処理の方だけ拡張する
* ElementのサブクラスとVisitorのサブクラスの組によって処理の内容が決まる->ダブルディスパッチ


# 所感

* ディレクトリやファイルという普遍的な構造はEntryクラスが持ちつつ、ユーザ処理をvisitorに移譲している印象
* Visitorを実装するにはEntryのサブクラスをすべて知っている必要はある。システムが決まっていることが前提になっているし、拡張時はVisitorも実装する必要がある。
* 探索するという概念をクラスに入れておく必要はある。階層構造が事前にわかっている場合に使えそう。
* visitor側でも探索するために階層を降りる処理が必要なので、Visitor側でも階層構造を意識する必要があるし、そもそもEntryのサブクラスごとに処理を実装する必要はある。
* C++について
  * enable_shared_from_thisというのを使った
    * thisをshared_ptrで返すということをできる。
    * ただ、デッドロックする光景がありありと想像できるので、気をつけたほうが良い。